# ATM_Controller
### -자료구조, 알고리즘

## [1. 계좌정보입력] 
▶Account_info.py

ATM기에서 잔액조회/예금/출금을 진행할 때 사용할 계좌를 생성한다.
다음과 같은 순서로 진행이 된다.

#### 1. 이름 입력 (기본 개인정보)
#### 2. 계좌번호 발생 (12자리) / 출력
  110-123-△△△△△△
  - 앞 6자리: 동일
  - 뒤 6자리: 100000이상 999999이하의 난수 발생
              : 사용자 데이터(user_df)에 저장되어있는 계좌번호와 중복시, 다시 난수 발생
#### 3. PIN number 입력 (4자리)
  → 두 번 입력받고, 두 값이 같아야 다음 단계 진행
#### 4. 카드번호 발생(16자리) / 출력
  : □□□□-□□□□-□□□□-□□□□
  - (10^15)이상 (10^16-1)이하의 16자리 난수 발생
  - 사용자 데이터(user_df)에 저장되어있는 카드번호와 중복시, 다시 난수 발생
#### 5. 잔액 초기화 ($0)
  
  
## [2. 사용자 데이터 추가] 
▶(def) MakeAccount

사용자 데이터프레임(user_df)에 1에서 받은 데이터를 dict로 묶어 행 단위로 추가한다.

- 1에서 받은 데이터: 이름(name),계좌번호(account_num), PIN number(pin_num), 카드번호(card_num), 잔액(balance)

![user_df](https://user-images.githubusercontent.com/78155086/124907220-d8752d80-e022-11eb-8b99-843776341938.PNG)
- MakeAccount 함수는 user_df를 반환하며, 이는 계속 호출되고 사용자의 행동(예금/출금)에 따라 update됨


## [3. ATM Controller - 카드 본인확인] 
▶ATMSequence.py

다음과 같은 순서로 진행이 된다.
#### 1. 카드번호 입력
  : 입력받은 카드번호가 user_df의 card 컬럼에 존재하면 2로 넘어간다.
  
  입력받은 카드번호가 있는 행의 index를 idx 변수에 저장한다.
#### 2. PI number 확인
  : 해당 카드의 PIN number를 정확히 입력해야 3으로 넘어간다. (최대 5번까지만 시행 가능)
#### 3. 계좌 확인
  : 출력되는 계좌번호가 본인의 것이 맞는지 확인한다.
 
## [4. ATM Controller - 메뉴 선택] 
▶(def)SubMenu

* [잔액조회] → 1 입력
* [  예금  ] → 2 입력
* [  출금  ] → 3 입력
*  (종료시, 0 입력)

#### 1. 잔액조회
user_df의 idx행에 있는 balance값을 출력한다.

#### 2. 예금
예금하려는 금액이 0보다 큰 정수인 경우, balance값을 update한다.


#### 3. 출금
출금하려는 금액이 0보다 큰 정수이면서 동시에 기존 balance값보다 작거나 같을 경우, 
balance값을 update한다.


### ■■ 관리자 모드 ■■
관리자 모드로 전환시, 사용자 데이터(user_df)를 출력받을 수 있다.(기본 메뉴일때 99 입력)
대신 key값을 입력해야 하며, 5번 이상 잘못 입력시 관리자모드는 비활성화된다.
* key값은 'EWHA'이다. (대문자)


### ■■ 입력 규칙 ■■
사용자의 결정을 받을 때 보통 0,1,2,3 등의 정수로 받는데, 이 때 정해진 정수값이 아닌 정수나, 정수가 아닌 실수, 선택지에 없는 음수, 문자열 등을 입력 받게 되면 잘못 입력하였음을 알리고, 다시 입력받는다.


### local PC에서 실행
1. git clone
2. 가상환경 활성화
3. requirements.txt 설치 (pandas 라이브러리)
4. python test.py로 실행
